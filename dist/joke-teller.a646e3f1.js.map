{"version":3,"sources":["joke-teller/joke-teller.js"],"names":["button","document","getElementById","audioElement","alert","VoiceRSS","speech","e","_validate","_request","key","src","hl","c","toLowerCase","a","Audio","canPlayType","replace","_buildRequest","t","_getXHR","onreadystatechange","readyState","status","responseText","indexOf","play","open","setRequestHeader","send","_detectCodec","v","r","f","ssml","XMLHttpRequest","ActiveXObject","toggleButton","disabled","resetButtonText","textContent","tellMe","joke","getJokes","fetch","response","json","data","setup","delivery","console","error","addEventListener"],"mappings":"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","file":"joke-teller.a646e3f1.js","sourceRoot":"..","sourcesContent":["\"use strict\";\n\nconst button = document.getElementById(`button`);\nconst audioElement = document.getElementById(`audio`);\n\n//? on load alert\n\nalert(\n  `We are still working on getting an actual Joker text-to-speech API to read the jokes aloud. For the meantime, enjoy the current voice.`\n);\n\n//? text-speech-SDK\n\nconst VoiceRSS = {\n  speech: function (e) {\n    this._validate(e), this._request(e);\n  },\n  _validate: function (e) {\n    if (!e) throw \"The settings are undefined\";\n    if (!e.key) throw \"The API key is undefined\";\n    if (!e.src) throw \"The text is undefined\";\n    if (!e.hl) throw \"The language is undefined\";\n    if (e.c && \"auto\" != e.c.toLowerCase()) {\n      var a = !1;\n      switch (e.c.toLowerCase()) {\n        case \"mp3\":\n          a = new Audio().canPlayType(\"audio/mpeg\").replace(\"no\", \"\");\n          break;\n        case \"wav\":\n          a = new Audio().canPlayType(\"audio/wav\").replace(\"no\", \"\");\n          break;\n        case \"aac\":\n          a = new Audio().canPlayType(\"audio/aac\").replace(\"no\", \"\");\n          break;\n        case \"ogg\":\n          a = new Audio().canPlayType(\"audio/ogg\").replace(\"no\", \"\");\n          break;\n        case \"caf\":\n          a = new Audio().canPlayType(\"audio/x-caf\").replace(\"no\", \"\");\n      }\n      if (!a) throw \"The browser does not support the audio codec \" + e.c;\n    }\n  },\n  _request: function (e) {\n    var a = this._buildRequest(e),\n      t = this._getXHR();\n    (t.onreadystatechange = function () {\n      if (4 == t.readyState && 200 == t.status) {\n        if (0 == t.responseText.indexOf(\"ERROR\")) throw t.responseText;\n        // new Audio(t.responseText).play();\n        audioElement.src = t.responseText;\n        audioElement.play();\n      }\n    }),\n      t.open(\"POST\", \"https://api.voicerss.org/\", !0),\n      t.setRequestHeader(\n        \"Content-Type\",\n        \"application/x-www-form-urlencoded; charset=UTF-8\"\n      ),\n      t.send(a);\n  },\n  _buildRequest: function (e) {\n    var a = e.c && \"auto\" != e.c.toLowerCase() ? e.c : this._detectCodec();\n    return (\n      \"key=\" +\n      (e.key || \"\") +\n      \"&src=\" +\n      (e.src || \"\") +\n      \"&hl=\" +\n      (e.hl || \"\") +\n      \"&v=\" +\n      (e.v || \"\") +\n      \"&r=\" +\n      (e.r || \"\") +\n      \"&c=\" +\n      (a || \"\") +\n      \"&f=\" +\n      (e.f || \"\") +\n      \"&ssml=\" +\n      (e.ssml || \"\") +\n      \"&b64=true\"\n    );\n  },\n  _detectCodec: function () {\n    var e = new Audio();\n    return e.canPlayType(\"audio/mpeg\").replace(\"no\", \"\")\n      ? \"mp3\"\n      : e.canPlayType(\"audio/wav\").replace(\"no\", \"\")\n      ? \"wav\"\n      : e.canPlayType(\"audio/aac\").replace(\"no\", \"\")\n      ? \"aac\"\n      : e.canPlayType(\"audio/ogg\").replace(\"no\", \"\")\n      ? \"ogg\"\n      : e.canPlayType(\"audio/x-caf\").replace(\"no\", \"\")\n      ? \"caf\"\n      : \"\";\n  },\n  _getXHR: function () {\n    try {\n      return new XMLHttpRequest();\n    } catch (e) {}\n    try {\n      return new ActiveXObject(\"Msxml3.XMLHTTP\");\n    } catch (e) {}\n    try {\n      return new ActiveXObject(\"Msxml2.XMLHTTP.6.0\");\n    } catch (e) {}\n    try {\n      return new ActiveXObject(\"Msxml2.XMLHTTP.3.0\");\n    } catch (e) {}\n    try {\n      return new ActiveXObject(\"Msxml2.XMLHTTP\");\n    } catch (e) {}\n    try {\n      return new ActiveXObject(\"Microsoft.XMLHTTP\");\n    } catch (e) {}\n    throw \"The browser does not support HTTP request\";\n  },\n};\n\n//? Disable/Enable button\n\nfunction toggleButton() {\n  button.disabled = !button.disabled;\n}\n\nfunction resetButtonText() {\n  button.textContent = `Joker, tell me a joke.`;\n}\n\n//? calling text-to-speech api with joke\nfunction tellMe(joke) {\n  VoiceRSS.speech({\n    key: \"970fa90033b04604871b3dcf69072515\",\n    src: joke,\n    hl: \"en-gb\",\n    v: \"Linda\",\n    r: 0,\n    c: \"mp3\",\n    f: \"44khz_16bit_stereo\",\n    ssml: false,\n  });\n}\n\n//? Get jokes from joke api\n\nlet joke = \"\";\n\nasync function getJokes() {\n  try {\n    const apiURL = `https://v2.jokeapi.dev/joke/Dark,Spooky?blacklistFlags=nsfw,religious,political,racist,sexist,explicit`;\n\n    const response = await fetch(apiURL);\n\n    const data = await response.json();\n\n    if (data.setup) {\n      joke = `${data.setup} ... ${data.delivery}`;\n    }\n\n    if (data.joke) {\n      joke = `${data.joke}`;\n    }\n\n    tellMe(joke);\n\n    //? disable button while joke is playing\n\n    button.textContent = `I'm telling you a joke...`;\n    toggleButton();\n  } catch (error) {\n    console.error(error);\n  }\n}\n\n//? event listens\nbutton.addEventListener(`click`, getJokes);\naudioElement.addEventListener(`ended`, toggleButton);\naudioElement.addEventListener(`ended`, resetButtonText);\n"]}