{"version":3,"sources":["joke-teller/text-to-speech.js"],"names":["VoiceRSS","speech","e","_validate","_request","key","src","hl","c","toLowerCase","a","Audio","canPlayType","replace","_buildRequest","t","_getXHR","onreadystatechange","readyState","status","responseText","indexOf","audioElement","play","open","setRequestHeader","send","_detectCodec","v","r","f","ssml","XMLHttpRequest","ActiveXObject"],"mappings":";AAEA,IAAMA,EAAW,CACfC,OAAQ,SAAUC,GACXC,KAAAA,UAAUD,GAAI,KAAKE,SAASF,IAEnCC,UAAW,SAAUD,GACf,IAACA,EAAG,KAAM,6BACV,IAACA,EAAEG,IAAK,KAAM,2BACd,IAACH,EAAEI,IAAK,KAAM,wBACd,IAACJ,EAAEK,GAAI,KAAM,4BACbL,GAAAA,EAAEM,GAAK,QAAUN,EAAEM,EAAEC,cAAe,CAClCC,IAAAA,GAAI,EACAR,OAAAA,EAAEM,EAAEC,eACL,IAAA,MACHC,GAAI,IAAIC,OAAQC,YAAY,cAAcC,QAAQ,KAAM,IACxD,MACG,IAAA,MACHH,GAAI,IAAIC,OAAQC,YAAY,aAAaC,QAAQ,KAAM,IACvD,MACG,IAAA,MACHH,GAAI,IAAIC,OAAQC,YAAY,aAAaC,QAAQ,KAAM,IACvD,MACG,IAAA,MACHH,GAAI,IAAIC,OAAQC,YAAY,aAAaC,QAAQ,KAAM,IACvD,MACG,IAAA,MACHH,GAAI,IAAIC,OAAQC,YAAY,eAAeC,QAAQ,KAAM,IAEzD,IAACH,EAAG,KAAM,gDAAkDR,EAAEM,IAGtEJ,SAAU,SAAUF,GACdQ,IAAAA,EAAI,KAAKI,cAAcZ,GACzBa,EAAI,KAAKC,UACVD,EAAEE,mBAAqB,WAClB,GAAA,GAAKF,EAAEG,YAAc,KAAOH,EAAEI,OAAQ,CACpC,GAAA,GAAKJ,EAAEK,aAAaC,QAAQ,SAAU,MAAMN,EAAEK,aAElDE,aAAahB,IAAMS,EAAEK,aACrBE,aAAaC,SAGfR,EAAES,KAAK,OAAQ,6BAA6B,GAC5CT,EAAEU,iBACA,eACA,oDAEFV,EAAEW,KAAKhB,IAEXI,cAAe,SAAUZ,GACnBQ,IAAAA,EAAIR,EAAEM,GAAK,QAAUN,EAAEM,EAAEC,cAAgBP,EAAEM,EAAI,KAAKmB,eAEtD,MAAA,QACCzB,EAAEG,KAAO,IACV,SACCH,EAAEI,KAAO,IACV,QACCJ,EAAEK,IAAM,IACT,OACCL,EAAE0B,GAAK,IACR,OACC1B,EAAE2B,GAAK,IACR,OACCnB,GAAK,IACN,OACCR,EAAE4B,GAAK,IACR,UACC5B,EAAE6B,MAAQ,IACX,aAGJJ,aAAc,WACRzB,IAAAA,EAAI,IAAIS,MACLT,OAAAA,EAAEU,YAAY,cAAcC,QAAQ,KAAM,IAC7C,MACAX,EAAEU,YAAY,aAAaC,QAAQ,KAAM,IACzC,MACAX,EAAEU,YAAY,aAAaC,QAAQ,KAAM,IACzC,MACAX,EAAEU,YAAY,aAAaC,QAAQ,KAAM,IACzC,MACAX,EAAEU,YAAY,eAAeC,QAAQ,KAAM,IAC3C,MACA,IAENG,QAAS,WACH,IACK,OAAA,IAAIgB,eACX,MAAO9B,IACL,IACK,OAAA,IAAI+B,cAAc,kBACzB,MAAO/B,IACL,IACK,OAAA,IAAI+B,cAAc,sBACzB,MAAO/B,IACL,IACK,OAAA,IAAI+B,cAAc,sBACzB,MAAO/B,IACL,IACK,OAAA,IAAI+B,cAAc,kBACzB,MAAO/B,IACL,IACK,OAAA,IAAI+B,cAAc,qBACzB,MAAO/B,IACH,KAAA","file":"text-to-speech.93997182.js","sourceRoot":"..","sourcesContent":["//? text-speech-SDK\n\nconst VoiceRSS = {\n  speech: function (e) {\n    this._validate(e), this._request(e);\n  },\n  _validate: function (e) {\n    if (!e) throw \"The settings are undefined\";\n    if (!e.key) throw \"The API key is undefined\";\n    if (!e.src) throw \"The text is undefined\";\n    if (!e.hl) throw \"The language is undefined\";\n    if (e.c && \"auto\" != e.c.toLowerCase()) {\n      var a = !1;\n      switch (e.c.toLowerCase()) {\n        case \"mp3\":\n          a = new Audio().canPlayType(\"audio/mpeg\").replace(\"no\", \"\");\n          break;\n        case \"wav\":\n          a = new Audio().canPlayType(\"audio/wav\").replace(\"no\", \"\");\n          break;\n        case \"aac\":\n          a = new Audio().canPlayType(\"audio/aac\").replace(\"no\", \"\");\n          break;\n        case \"ogg\":\n          a = new Audio().canPlayType(\"audio/ogg\").replace(\"no\", \"\");\n          break;\n        case \"caf\":\n          a = new Audio().canPlayType(\"audio/x-caf\").replace(\"no\", \"\");\n      }\n      if (!a) throw \"The browser does not support the audio codec \" + e.c;\n    }\n  },\n  _request: function (e) {\n    var a = this._buildRequest(e),\n      t = this._getXHR();\n    (t.onreadystatechange = function () {\n      if (4 == t.readyState && 200 == t.status) {\n        if (0 == t.responseText.indexOf(\"ERROR\")) throw t.responseText;\n        // new Audio(t.responseText).play();\n        audioElement.src = t.responseText;\n        audioElement.play();\n      }\n    }),\n      t.open(\"POST\", \"https://api.voicerss.org/\", !0),\n      t.setRequestHeader(\n        \"Content-Type\",\n        \"application/x-www-form-urlencoded; charset=UTF-8\"\n      ),\n      t.send(a);\n  },\n  _buildRequest: function (e) {\n    var a = e.c && \"auto\" != e.c.toLowerCase() ? e.c : this._detectCodec();\n    return (\n      \"key=\" +\n      (e.key || \"\") +\n      \"&src=\" +\n      (e.src || \"\") +\n      \"&hl=\" +\n      (e.hl || \"\") +\n      \"&v=\" +\n      (e.v || \"\") +\n      \"&r=\" +\n      (e.r || \"\") +\n      \"&c=\" +\n      (a || \"\") +\n      \"&f=\" +\n      (e.f || \"\") +\n      \"&ssml=\" +\n      (e.ssml || \"\") +\n      \"&b64=true\"\n    );\n  },\n  _detectCodec: function () {\n    var e = new Audio();\n    return e.canPlayType(\"audio/mpeg\").replace(\"no\", \"\")\n      ? \"mp3\"\n      : e.canPlayType(\"audio/wav\").replace(\"no\", \"\")\n      ? \"wav\"\n      : e.canPlayType(\"audio/aac\").replace(\"no\", \"\")\n      ? \"aac\"\n      : e.canPlayType(\"audio/ogg\").replace(\"no\", \"\")\n      ? \"ogg\"\n      : e.canPlayType(\"audio/x-caf\").replace(\"no\", \"\")\n      ? \"caf\"\n      : \"\";\n  },\n  _getXHR: function () {\n    try {\n      return new XMLHttpRequest();\n    } catch (e) {}\n    try {\n      return new ActiveXObject(\"Msxml3.XMLHTTP\");\n    } catch (e) {}\n    try {\n      return new ActiveXObject(\"Msxml2.XMLHTTP.6.0\");\n    } catch (e) {}\n    try {\n      return new ActiveXObject(\"Msxml2.XMLHTTP.3.0\");\n    } catch (e) {}\n    try {\n      return new ActiveXObject(\"Msxml2.XMLHTTP\");\n    } catch (e) {}\n    try {\n      return new ActiveXObject(\"Microsoft.XMLHTTP\");\n    } catch (e) {}\n    throw \"The browser does not support HTTP request\";\n  },\n};\n"]}